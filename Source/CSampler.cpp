#include "CSampler.h"
#include "CRender.h"

namespace glliba
{
	////////////////////////////////////////////////////////////////////////////////////////////////////

	CSampler::CSampler()
		: m_iSamplerID(0)
		, m_eWrapType(WT_REPEAT)
		, m_eMinFilerType(FT_LINEAR_MIPMAP_LINEAR)
		, m_eMagFilerType(FT_LINEAR)

		, m_bNeedUpdate(false)
	{
		CSampler::init();
	}

	////////////////////////////////////////////////////////////////////////////////////////////////////
	
	CSampler::~CSampler()
	{
		RENDER->deleteSampler(m_iSamplerID);
	}

	////////////////////////////////////////////////////////////////////////////////////////////////////

	uint CSampler::getSamplerID() const
	{
		return m_iSamplerID;
	}

	////////////////////////////////////////////////////////////////////////////////////////////////////
	
	WRAP_TYPE CSampler::getWrapType() const
	{
		return m_eWrapType;
	}

	////////////////////////////////////////////////////////////////////////////////////////////////////

	FILTER_TYPE	CSampler::getMinFilerType() const
	{
		return m_eMinFilerType;
	}

	////////////////////////////////////////////////////////////////////////////////////////////////////

	FILTER_TYPE	CSampler::getMagFilerType() const
	{
		return m_eMagFilerType;
	}

	////////////////////////////////////////////////////////////////////////////////////////////////////

	void CSampler::setWrapType( WRAP_TYPE _eType )
	{
		m_eWrapType = _eType;
	}

	////////////////////////////////////////////////////////////////////////////////////////////////////
	
	void CSampler::setFilterType( FILTER_TYPE _eMinType, FILTER_TYPE _eMagType )
	{
		m_eMinFilerType = _eMinType;
		m_eMagFilerType = _eMagType;
	}

	////////////////////////////////////////////////////////////////////////////////////////////////////

	void CSampler::init()
	{
		RENDER->initSampler( m_iSamplerID, m_eWrapType, m_eMinFilerType, m_eMagFilerType );
	}

	////////////////////////////////////////////////////////////////////////////////////////////////////

	void CSampler::update()
	{
		if (!m_bNeedUpdate)
		{
			return;
		}

		RENDER->updateSampler( m_iSamplerID, m_eWrapType, m_eMinFilerType, m_eMagFilerType );
	}
}